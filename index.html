<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›¾ç‰‡ç®¡ç†ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: bold;
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-control:focus {
            border-color: #667eea;
            outline: none;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            margin-right: 10px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .gallery-item {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }
        
        .gallery-item:hover {
            transform: translateY(-5px);
        }
        
        .gallery-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        
        .gallery-info {
            padding: 15px;
        }
        
        .gallery-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .password-section {
            background: rgba(255,255,255,0.9);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .upload-form {
            animation: slideDown 0.3s ease;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“¸ å›¾ç‰‡ç®¡ç†ç³»ç»Ÿ</h1>
            <p>ä¸Šä¼ ã€ç®¡ç†å’Œåˆ†äº«æ‚¨çš„å›¾ç‰‡</p>
        </div>
        
        <div class="card">
            <div id="poke-password-section" class="password-section">
                <h3>ç®¡ç†æƒé™éªŒè¯</h3>
                <div class="form-group">
                    <label for="poke-password">è¯·è¾“å…¥ç®¡ç†å¯†ç ï¼š</label>
                    <input type="password" id="poke-password" class="form-control" placeholder="è¾“å…¥å¯†ç ä»¥ç®¡ç†å›¾ç‰‡">
                </div>
                <button onclick="verifyPassword()" class="btn">éªŒè¯å¯†ç </button>
            </div>
            
            <div id="poke-upload-form" class="upload-form" style="display: none;">
                <h3 id="form-title">ä¸Šä¼ æ–°å›¾ç‰‡</h3>
                <form id="poke-form" onsubmit="return false;">
                    <input type="hidden" id="poke-id">
                    
                    <div class="form-group">
                        <label for="poke-file">é€‰æ‹©å›¾ç‰‡ï¼š</label>
                        <input type="file" id="poke-file" class="form-control" accept="image/*" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="poke-description">å›¾ç‰‡æè¿°ï¼ˆå¯é€‰ï¼‰ï¼š</label>
                        <input type="text" id="poke-description" class="form-control" placeholder="è¯·è¾“å…¥å›¾ç‰‡æè¿°">
                    </div>
                    
                    <div class="form-group">
                        <label for="poke-tags">æ ‡ç­¾ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰ï¼š</label>
                        <input type="text" id="poke-tags" class="form-control" placeholder="ä¾‹å¦‚ï¼šé£æ™¯,æ—…è¡Œ,è‡ªç„¶">
                    </div>
                    
                    <div class="form-actions">
                        <button onclick="savePoke()" class="btn" id="save-btn">ä¸Šä¼ å›¾ç‰‡</button>
                        <button onclick="resetPokeForm()" class="btn btn-secondary">å–æ¶ˆ</button>
                    </div>
                </form>
            </div>
        </div>
        
        <div class="card">
            <h3>ğŸ“ å›¾ç‰‡åº“</h3>
            <div id="poke-gallery" class="gallery">
                <!-- å›¾ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            </div>
        </div>
    </div>

    <script>
        // ç®¡ç†å¯†ç ï¼ˆåœ¨å®é™…åº”ç”¨ä¸­åº”è¯¥ä»æœåŠ¡å™¨è·å–ï¼‰
        const ADMIN_PASSWORD = "admin123";
        let editMode = { poke: false };
        
        // åˆå§‹åŒ–åŠ è½½å›¾ç‰‡æ•°æ®
        document.addEventListener('DOMContentLoaded', function() {
            loadSettings();
            loadPokeData();
        });
        
        // éªŒè¯å¯†ç 
        function verifyPassword() {
            const password = document.getElementById('poke-password').value;
            if (password === ADMIN_PASSWORD) {
                document.getElementById('poke-password-section').style.display = 'none';
                document.getElementById('poke-upload-form').style.display = 'block';
            } else {
                alert('å¯†ç é”™è¯¯ï¼');
            }
        }
        
        // ç”Ÿæˆå”¯ä¸€ID
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }
        
        // ä¿å­˜å›¾ç‰‡æ•°æ®
        function savePoke() {
            const fileInput = document.getElementById('poke-file');
            const description = document.getElementById('poke-description').value;
            const tags = document.getElementById('poke-tags').value.split(',').map(tag => tag.trim()).filter(tag => tag);
            const id = document.getElementById('poke-id').value;
            
            if (!fileInput.files[0] && !id) {
                alert('è¯·é€‰æ‹©ä¸€å¼ å›¾ç‰‡ï¼');
                return;
            }
            
            if (fileInput.files[0]) {
                const reader = new FileReader();
                const uploadDate = new Date().toLocaleString('zh-CN');
                
                reader.onload = function(e) {
                    let pokeData = JSON.parse(localStorage.getItem('pokeData') || '[]');
                    
                    if (editMode.poke && id) {
                        // æ›´æ–°ç°æœ‰å›¾ç‰‡
                        const index = pokeData.findIndex(item => item.id === id);
                        if (index !== -1) {
                            pokeData[index] = {
                                ...pokeData[index],
                                image: e.target.result,
                                description,
                                tags,
                                uploadDate
                            };
                        }
                    } else {
                        // æ·»åŠ æ–°å›¾ç‰‡
                        pokeData.push({
                            id: generateId(),
                            image: e.target.result,
                            description,
                            tags,
                            uploadDate
                        });
                    }
                    
                    localStorage.setItem('pokeData', JSON.stringify(pokeData));
                    resetPokeForm();
                    loadPokeData();
                    alert(id ? 'å›¾ç‰‡å·²æ›´æ–°ï¼' : 'å›¾ç‰‡å·²ä¸Šä¼ ï¼');
                };
                reader.readAsDataURL(fileInput.files[0]);
            }
        }
        
        // ç¼–è¾‘å›¾ç‰‡
        function editPoke(id) {
            const pokeData = JSON.parse(localStorage.getItem('pokeData') || '[]');
            const item = pokeData.find(item => item.id === id);
            
            if (item) {
                document.getElementById('poke-id').value = item.id;
                document.getElementById('poke-description').value = item.description || '';
                document.getElementById('poke-tags').value = item.tags?.join(', ') || '';
                document.getElementById('form-title').textContent = 'ç¼–è¾‘å›¾ç‰‡';
                document.getElementById('save-btn').textContent = 'æ›´æ–°å›¾ç‰‡';
                
                editMode.poke = true;
            }
        }
        
        // åˆ é™¤å›¾ç‰‡
        function deletePoke(id) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™å¼ å›¾ç‰‡å—ï¼Ÿ')) {
                const pokeData = JSON.parse(localStorage.getItem('pokeData') || '[]');
                const newData = pokeData.filter(item => item.id !== id);
                localStorage.setItem('pokeData', JSON.stringify(newData));
                loadPokeData();
                alert('å›¾ç‰‡å·²åˆ é™¤ï¼');
            }
        }
        
        // åŠ è½½å›¾ç‰‡æ•°æ®å¹¶æ˜¾ç¤º
        function loadPokeData() {
            const pokeData = JSON.parse(localStorage.getItem('pokeData') || '[]');
            const gallery = document.getElementById('poke-gallery');
            
            gallery.innerHTML = '';
            
            if (pokeData.length === 0) {
                gallery.innerHTML = '<div style="text-align: center; padding: 40px; color: #666; grid-column: 1/-1;">æš‚æ— å›¾ç‰‡ï¼Œè¯·ä¸Šä¼ ç¬¬ä¸€å¼ å›¾ç‰‡ï¼</div>';
                return;
            }
            
            pokeData.forEach(item => {
                const galleryItem = document.createElement('div');
                galleryItem.className = 'gallery-item';
                galleryItem.innerHTML = `
                    <img src="${item.image}" alt="${item.description}" class="gallery-image">
                    <div class="gallery-info">
                        <p><strong>ä¸Šä¼ æ—¶é—´ï¼š</strong>${item.uploadDate}</p>
                        ${item.description ? `<p><strong>æè¿°ï¼š</strong>${item.description}</p>` : ''}
                        ${item.tags && item.tags.length > 0 ? `<p><strong>æ ‡ç­¾ï¼š</strong>${item.tags.map(tag => `<span style="background: #667eea; color: white; padding: 2px 8px; border-radius: 12px; margin-right: 5px; font-size: 12px;">${tag}</span>`).join('')}</p>` : ''}
                        <div class="gallery-actions">
                            <button onclick="editPoke('${item.id}')" class="btn" style="padding: 8px 16px; font-size: 14px;">ç¼–è¾‘</button>
                            <button onclick="deletePoke('${item.id}')" class="btn btn-danger" style="padding: 8px 16px; font-size: 14px;">åˆ é™¤</button>
                        </div>
                    </div>
                `;
                gallery.appendChild(galleryItem);
            });
        }
        
        // é‡ç½®è¡¨å•
        function resetPokeForm() {
            document.getElementById('poke-form').reset();
            document.getElementById('poke-id').value = '';
            document.getElementById('form-title').textContent = 'ä¸Šä¼ æ–°å›¾ç‰‡';
            document.getElementById('save-btn').textContent = 'ä¸Šä¼ å›¾ç‰‡';
            document.getElementById('poke-upload-form').style.display = 'none';
            document.getElementById('poke-password-section').style.display = 'block';
            document.getElementById('poke-password').value = '';
            editMode.poke = false;
        }
        
        // åŠ è½½è®¾ç½®
        function loadSettings() {
            // è¿™é‡Œå¯ä»¥åŠ è½½å…¶ä»–è®¾ç½®ï¼Œå¦‚ä¸»é¢˜ã€å¸ƒå±€ç­‰
            console.log('è®¾ç½®åŠ è½½å®Œæˆ');
            
            // åŠ è½½LOGO
            const logoData = localStorage.getItem('siteLogo');
            if (logoData) {
                // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯ä»¥å°†LOGOæ˜¾ç¤ºåœ¨é¡µå¤´
                console.log('LOGOå·²åŠ è½½');
            }
            
            // å¯ä»¥æ·»åŠ æ›´å¤šåˆå§‹åŒ–è®¾ç½®
            const settings = JSON.parse(localStorage.getItem('appSettings') || '{}');
            
            // åº”ç”¨ä¸»é¢˜è®¾ç½®
            if (settings.theme) {
                document.body.style.background = settings.theme;
            }
        }
        
        // å¯¼å‡ºæ‰€æœ‰å›¾ç‰‡æ•°æ®ï¼ˆå¤‡ä»½åŠŸèƒ½ï¼‰
        function exportData() {
            const pokeData = JSON.parse(localStorage.getItem('pokeData') || '[]');
            const dataStr = JSON.stringify(pokeData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `poke-backup-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }
        
        // å¯¼å…¥æ•°æ®ï¼ˆæ¢å¤åŠŸèƒ½ï¼‰
        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(e) {
                const file = e.target.files[0];
                const reader = new FileReader();
                
                reader.onload = function(event) {
                    try {
                        const data = JSON.parse(event.target.result);
                        localStorage.setItem('pokeData', JSON.stringify(data));
                        loadPokeData();
                        alert('æ•°æ®å¯¼å…¥æˆåŠŸï¼');
                    } catch (err) {
                        alert('æ–‡ä»¶æ ¼å¼é”™è¯¯ï¼');
                    }
                };
                
                reader.readAsText(file);
            };
            input.click();
        }
        
</body>
</html>
